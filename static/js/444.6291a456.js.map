{"version":3,"file":"static/js/444.6291a456.js","mappings":"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","sources":["webpack://web_game/./src/views/game/childCpms/Game3.vue?0856","webpack://web_game/./src/views/game/childCpms/Game3.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-e376f19a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"game3\" }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"贪吃蛇\", -1))\nconst _hoisted_4 = { class: \"hello\" }\nconst _hoisted_5 = [\"onKeyup:click\"]\nconst _hoisted_6 = [\"item\"]\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"note\" }, \"游戏说明：空格键space 暂停游戏,方向键开始游戏\", -1))\nconst _hoisted_8 = { class: \"tips\" }\n\nimport { ref } from 'vue'\n\ninterface ITFFood {\n  x: number\n  y: number\n}\ninterface ITFSnake {\n  x: number\n  y: number\n  type?: string\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Game3',\n  setup(__props) {\n\nconst score = ref(0)\nconst size = ref(20)\nconst coordinate = ref([])\nconst food = ref()\nconst snake = ref<[ITFSnake] | undefined>()\nconst direction = ref('down')\nconst moveTimer = ref<number>()\nconst msg = ref('操控方向键开始游戏') //tips\nconst speed = ref(200) //速度ms\nconst gameover = ref(true)\n\n//创建表格坐标\nconst createXy = (size: number) => {\n  for (let i = 1; i <= size; i++) {\n    for (let j = 1; j <= size; j++) {\n      let xy = {\n        x: i,\n        y: j,\n        type: ''\n      }\n      coordinate.value.push(xy as never)\n    }\n  }\n}\n\n// 随机生成食物\nconst randomFood = () => {\n  food.value = {\n    x: random(1, size.value),\n    y: random(1, size.value),\n    type: 'food'\n  }\n}\n\n// 初始化snake的位置\nconst initSnakeXy = () => {\n  snake.value = [\n    { x: 3, y: 3 },\n    { x: 3, y: 4 },\n    { x: 3, y: 5 }\n  ]\n}\n\n// snake身体的移动\nconst snakeMove = () => {\n  clearInterval(moveTimer.value)\n  moveTimer.value = setInterval(() => {\n    const head = snake.value[0]\n    if (direction.value === 'down') {\n      updateSnake.value({ x: head.x + 1, y: head.y }) //将蛇头前面一个格子的x,y传递到updateSnake中\n    }\n    if (direction.value === 'right') {\n      updateSnake.value({ x: head.x, y: head.y + 1 })\n    }\n    if (direction.value === 'up') {\n      updateSnake.value({ x: head.x - 1, y: head.y })\n    }\n    if (direction.value === 'left') {\n      updateSnake.value({ x: head.x, y: head.y - 1 })\n    }\n  }, this.speed)\n}\n\n// 更新snake的变化\nconst updateSnake = (head: ITFFood) => {\n  const isEatBody = snake.value.find((item: ITFFood) => head.x === item.x && head.y === item.y) //判断蛇头是否吃到身体)\n  if (\n    //当蛇头的位置在圈外就结束游戏\n    head.x < 1 ||\n    head.x > size.value ||\n    head.y < 1 ||\n    head.y > size.value ||\n    isEatBody\n  ) {\n    //游戏结束\n    clearInterval(moveTimer.value)\n    console.log(`游戏结束，你的得分为${score.value}`)\n    msg.value = 'GameOver！'\n    gameover.value = true\n    return\n  }\n  if (head.x === food.value.x && head.y === food.value.y) {\n    //吃到食物的情况\n    snake.value.unshift(head as never) //增加长度\n    randomFood() //再随机生成一个食物\n    score.value++ //分数+1\n  } else {\n    //没有吃到食物的情况\n    snake.value.unshift(head as never)\n    snake.value.pop()\n  }\n}\n\n// 控制游戏运行方向\nconst changeDirection = (e: KeyboardEvent) => {\n  switch (e && e.keyCode) {\n    case 37:\n      console.info('37=左键')\n      if (direction.value !== 'right') {\n        direction.value = 'left'\n        snakeMove()\n      }\n      break\n    case 38:\n      console.info('38=上键')\n      if (direction.value !== 'down') {\n        direction.value = 'up'\n        snakeMove()\n      }\n      break\n    case 39:\n      console.info('39=右键')\n      if (direction.value !== 'left') {\n        direction.value = 'right'\n        snakeMove()\n      }\n      break\n    case 40:\n      console.info('40下键')\n      if (direction.value !== 'up') {\n        direction.value = 'down'\n        snakeMove()\n      }\n      break\n    case 32:\n      console.info('32空格')\n      clearInterval(moveTimer.value)\n      msg.value = '游戏已暂停'\n      break\n    default:\n      break\n  }\n}\n\n// 键盘事件\nconst keyEvent = () => {\n  document.onkeyup = function (event) {\n    if (gameover.value) {\n      let beforeFood = document.querySelector('.food')\n      if (beforeFood) {\n        document.querySelector('.food')!.classList.remove('food')\n      }\n      //清空上一局食物\n      food.value = {}\n      gameover.value = false\n      initSnakeXy()\n      randomFood() //每局游戏开始新生成一个食物\n      direction.value = ''\n      score.value = 0\n    }\n    var e = event || window.event || arguments.callee.caller.arguments[0]\n    changeDirection(e)\n  }\n}\n\n/**\n * 产生随机整数，包含下限值，但不包括上限值\n * @param {Number} lower 下限\n * @param {Number} upper 上限\n * @return {Number} 返回在下限到上限之间的一个随机整数\n */\nconst random = (lower: number, upper: number) => {\n  return Math.floor(Math.random() * (upper - lower)) + lower\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"h2\", null, \"得分:\" + _toDisplayString(score.value), 1)\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", {\n        class: \"table\",\n        \"onKeyup:click\": _withModifiers(keyEvent, [\"ctrl\"]),\n        style: _normalizeStyle({ width: 15 * size.value + 'px' })\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(coordinate.value, (item, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: \"em\",\n            style: _normalizeStyle({ float: item.y / size.value !== 1 ? '' : '' }),\n            item: item.x + '-' + item.y\n          }, [\n            _createElementVNode(\"div\", {\n              class: _normalizeClass({\n              food: item.type == 'food',\n              'snake-header': item.type == 'snakeHeader',\n              'snake-body': item.type == 'snakeBody'\n            })\n            }, null, 2)\n          ], 12, _hoisted_6))\n        }), 128))\n      ], 44, _hoisted_5)\n    ]),\n    _hoisted_7,\n    _createElementVNode(\"div\", _hoisted_8, _toDisplayString(msg.value), 1)\n  ]))\n}\n}\n\n})","import script from \"./Game3.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Game3.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./Game3.vue?vue&type=style&index=0&id=e376f19a&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/games/games/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e376f19a\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","setup","__props","score","size","coordinate","food","snake","direction","moveTimer","msg","gameover","randomFood","value","x","random","y","type","initSnakeXy","snakeMove","clearInterval","setInterval","head","updateSnake","speed","isEatBody","find","item","console","log","unshift","pop","changeDirection","e","keyCode","info","keyEvent","document","onkeyup","event","beforeFood","querySelector","classList","remove","window","arguments","callee","caller","lower","upper","Math","floor","_ctx","_cache","style","width","index","key","float","__exports__"],"sourceRoot":""}